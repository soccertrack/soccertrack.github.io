<!DOCTYPE HTML>

<html>
	<head>
		<title>TrackSpendR -- Amazon Results</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	</head>
	<body class="left-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header" style="background-color:black;">

					<!-- Logo -->
						<h1><a href="index.html" style="color:white;">TrackSpendR</a></h1>
				</section>

			<!-- Main -->
				<section id="main">
					<div class="container">
						<div class="row">
							<div class="col-4 col-12-medium">

								<!-- Sidebar -->
									<section class="box">
										<a href="#" class="image featured"><img src="images/AMZN.jpg" alt="" /></a>
										<header>
											<h3>TrackSpendR Home</h3>
										</header>
										<p>Analyze other e-commerce spending.</p>
										<footer>
											<a href="index.html" class="button alt">&lt; Home</a>
										</footer>
									</section>

							</div>
							<div class="col-8 col-12-medium imp-medium">

								<!-- Content -->
									<article class="box post">
										<header>
											<h2>Your Amazon Spending</h2>
											<p>Report generated from analyzing your Amazon spending via TrackSpendR technology.</p>
										</header>
										<h2>2021</h2>
										<hr>
										<h4>No. of orders: <span id="numOrders">0</span></h4>
										<h4>Total Purchases: <span id="totalAmt">$0.0</span></h4>
										<h4>Total Sales Tax Paid: <span id="salesTax">$0.00</span></h4>
										<hr>
										<div><canvas id="doughnut-chart" width="700" height="450"></canvas></div>
										<hr>
										<table>
											<tr style="background-color: lightgray;">
												<td><b>Month</b></td>
												<td><b>Order Quantity</b></td>
												<td><b>Order Amount</b></td>
											</tr>
											<tr>
												<td>January</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>February</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>March</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>April</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>May</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>June</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>July</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>August</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>September</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>October</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>November</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
											<tr>
												<td>December</td>
												<td class="OrderQuantity">0</td>
												<td class="OrderAmount">$0</td>
											</tr>
										</table>
										
									</article>

							</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
				<section id="footer">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">
								<section>
									<header>
										<h2>Blandit nisl adipiscing</h2>
									</header>
									<ul class="dates">
										<li>
											<span class="date">Jan <strong>27</strong></span>
											<h3><a href="#">Lorem dolor sit amet veroeros</a></h3>
											<p>Ipsum dolor sit amet veroeros consequat blandit ipsum phasellus lorem consequat etiam.</p>
										</li>
										<li>
											<span class="date">Jan <strong>23</strong></span>
											<h3><a href="#">Ipsum sed blandit nisl consequat</a></h3>
											<p>Blandit phasellus lorem ipsum dolor tempor sapien tortor hendrerit adipiscing feugiat lorem.</p>
										</li>
										<li>
											<span class="date">Jan <strong>15</strong></span>
											<h3><a href="#">Magna tempus lorem feugiat</a></h3>
											<p>Dolore consequat sed phasellus lorem sed etiam nullam dolor etiam sed amet sit consequat.</p>
										</li>
										<li>
											<span class="date">Jan <strong>12</strong></span>
											<h3><a href="#">Dolore tempus ipsum feugiat nulla</a></h3>
											<p>Feugiat lorem dolor sed nullam tempus lorem ipsum dolor sit amet nullam consequat.</p>
										</li>
										<li>
											<span class="date">Jan <strong>10</strong></span>
											<h3><a href="#">Blandit tempus aliquam?</a></h3>
											<p>Feugiat sed tempus blandit tempus adipiscing nisl lorem ipsum dolor sit amet dolore.</p>
										</li>
									</ul>
								</section>
							</div>
							<div class="col-4 col-12-medium">
								<section>
									<header>
										<h2>What's this all about?</h2>
									</header>
									<a href="#" class="image featured"><img src="images/pic10.jpg" alt="" /></a>
									<p>
										This is <strong>Dopetrope</strong> a free, fully responsive HTML5 site template by
										<a href="http://twitter.com/ajlkn">AJ</a> for <a href="http://html5up.net/">HTML5 UP</a> It's released for free under
										the <a href="http://html5up.net/license/">Creative Commons Attribution</a> license so feel free to use it for any personal or commercial project &ndash; just don't forget to credit us!
									</p>
									<footer>
										<ul class="actions">
											<li><a href="#" class="button">Find out more</a></li>
										</ul>
									</footer>
								</section>
							</div>
							<div class="col-4 col-6-medium col-12-small">
								<section>
									<header>
										<h2>Tempus consequat</h2>
									</header>
									<ul class="divided">
										<li><a href="#">Lorem ipsum dolor sit amet sit veroeros</a></li>
										<li><a href="#">Sed et blandit consequat sed tlorem blandit</a></li>
										<li><a href="#">Adipiscing feugiat phasellus sed tempus</a></li>
										<li><a href="#">Hendrerit tortor vitae mattis tempor sapien</a></li>
										<li><a href="#">Sem feugiat sapien id suscipit magna felis nec</a></li>
										<li><a href="#">Elit class aptent taciti sociosqu ad litora</a></li>
									</ul>
								</section>
							</div>
							<div class="col-4 col-6-medium col-12-small">
								<section>
									<header>
										<h2>Ipsum et phasellus</h2>
									</header>
									<ul class="divided">
										<li><a href="#">Lorem ipsum dolor sit amet sit veroeros</a></li>
										<li><a href="#">Sed et blandit consequat sed tlorem blandit</a></li>
										<li><a href="#">Adipiscing feugiat phasellus sed tempus</a></li>
										<li><a href="#">Hendrerit tortor vitae mattis tempor sapien</a></li>
										<li><a href="#">Sem feugiat sapien id suscipit magna felis nec</a></li>
										<li><a href="#">Elit class aptent taciti sociosqu ad litora</a></li>
									</ul>
								</section>
							</div>
							<div class="col-4 col-12-medium">
								<section>
									<header>
										<h2>Vitae tempor lorem</h2>
									</header>
									<ul class="social">
										<li><a class="icon brands fa-facebook-f" href="#"><span class="label">Facebook</span></a></li>
										<li><a class="icon brands fa-twitter" href="#"><span class="label">Twitter</span></a></li>
										<li><a class="icon brands fa-dribbble" href="#"><span class="label">Dribbble</span></a></li>
										<li><a class="icon brands fa-tumblr" href="#"><span class="label">Tumblr</span></a></li>
										<li><a class="icon brands fa-linkedin-in" href="#"><span class="label">LinkedIn</span></a></li>
									</ul>
									<ul class="contact">
										<li>
											<h3>Address</h3>
											<p>
												Untitled Incorporated<br />
												1234 Somewhere Road Suite<br />
												Nashville, TN 00000-0000
											</p>
										</li>
										<li>
											<h3>Mail</h3>
											<p><a href="#">someone@untitled.tld</a></p>
										</li>
										<li>
											<h3>Phone</h3>
											<p>(800) 000-0000</p>
										</li>
									</ul>
								</section>
							</div>
							<div class="col-12">

								<!-- Copyright -->
									<div id="copyright">
										<ul class="links">
											<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
										</ul>
									</div>

							</div>
						</div>
					</div>
				</section>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

			<script>
				const dataSet = {
					type: 'doughnut',
					data: {
					labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
					datasets: [
						{
						label: "Amazon Spending (outer ring), Order Amount (inner ring)",
						backgroundColor: ["#000000", "#DD1111","#226622","#3333DD","#884444", "#558855", "#666688", "#997777", "#889988", "#9999aa", "#ffaaaa", "#bbffbb"],
						data: []
						},
						{
						backgroundColor: ["#000000", "#DD1111","#226622","#3333DD","#884444", "#558855", "#666688", "#997777", "#889988", "#9999aa", "#ffaaaa", "#bbffbb"],
						data: []
						}
					]
					},
					options: {
						responsive: true,
						title: {
							display: true,
							text: "Amazon Spending $ (outer ring), Order Quantity (inner ring)"
						}
					}
				};

				function updateResults(amt, units, salesTax) {

					var unitTotal = 0;
					var amountTotal = 0;

					dataSet.data.datasets[0].data = amt;
					dataSet.data.datasets[1].data = units;

					new Chart(document.getElementById("doughnut-chart"), dataSet);

					const quantities = document.getElementsByClassName("OrderQuantity"); 
					for(var i=0;i<quantities.length;++i){
						let num = dataSet.data.datasets[1].data[i];
						quantities[i].innerText = num;
						unitTotal += num;

					}

					const amounts = document.getElementsByClassName("OrderAmount");
					for(var i=0;i<amounts.length;++i){
						let num = dataSet.data.datasets[0].data[i];
						amounts[i].innerText = dataSet.data.datasets[0].data[i];
						amountTotal += num;
					}

					let salesTaxElement = document.getElementById("salesTax");
					salesTaxElement.innerText = "$" + salesTax;
					
					let numOrdersElement = document.getElementById("numOrders");
					numOrdersElement.innerText = unitTotal;
					
					let totalAmtElement = document.getElementById("totalAmt");
					totalAmtElement.innerText = "$" + amountTotal;
					
				}

				document.addEventListener('amazonResultEvent', function (e) {
					let data = e.detail;
					updateResults(data[0], data[1], data[2]);
				});
		</script>


	</body>
</html>